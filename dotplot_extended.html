<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DotPlot Extended Example</title>
</head>
<body>
<script src="js/libs/jquery.min.js"></script>
<script src="js/libs/d3.min.js"></script>
<script src="js/dotplot.js"></script>
<script>
    /**
     * On click, Second svg should have an arc, click tooltip, and no header highlighting
     * @param x
     * @param y
     * @param z
     * @param pname
     */
    function click_reaction_2(x, y, z,pname) {
        click_default(x, y, z, pname);
        d3.select("#"+"_arc_polyline").remove();
        d3.select("#second_border_"+x+"_0").style("fill", "white");
        d3.select("#second_border_"+y+"_0").style("fill", "white");
    }

    /**
     * Second svg should have no hover reaction
     * @param x
     * @param y
     * @param z
     * @param pname
     */
    function hover_reaction_2(x, y, z,pname) {
    }

    /**
     * On click in the upper triangle, first svg displays the second svg
     * @param x
     * @param y
     * @param z
     * @param pname
     */
    function click_reaction_1(x, y, z,pname) {
        d3.select("#first_arc_polyline").remove();
//        color_headers_subseq(x,y,z,"first");

        var cells = [[{'i': 0, 'j': 0, 'value': 0, 'traces': []}, {'i': 0, 'j': 1, 'value': 0, 'traces': []}, {
            'i': 0,
            'j': 2,
            'value': 0,
            'traces': []
        }, {'i': 0, 'j': 3, 'value': 0, 'traces': []}, {'i': 0, 'j': 4, 'value': 0, 'traces': []}, {
            'i': 0,
            'j': 5,
            'value': 0,
            'traces': []
        }, {'i': 0, 'j': 6, 'value': 0, 'traces': []}, {'i': 0, 'j': 7, 'value': 0, 'traces': []}], [{
            'i': 1,
            'j': 0,
            'value': 0,
            'traces': []
        }, {'i': 1, 'j': 1, 'value': 0, 'traces': []}, {'i': 1, 'j': 2, 'value': 0, 'traces': []}, {
            'i': 1,
            'j': 3,
            'value': 0.045538815895561774,
            'traces': []
        }, {'i': 1, 'j': 4, 'value': 0.045538815895561774, 'traces': []}, {
            'i': 1,
            'j': 5,
            'value': 0.16932615163400927,
            'traces': []
        }, {'i': 1, 'j': 6, 'value': 0, 'traces': []}, {
            'i': 1,
            'j': 7,
            'value': 0.41690082311090426,
            'traces': []
        }], [{'i': 2, 'j': 0, 'value': null, 'traces': []}, {'i': 2, 'j': 1, 'value': 0, 'traces': []}, {
            'i': 2,
            'j': 2,
            'value': 0,
            'traces': []
        }, {'i': 2, 'j': 3, 'value': 0, 'traces': []}, {
            'i': 2,
            'j': 4,
            'value': 0.2931134873724568,
            'traces': []
        }, {'i': 2, 'j': 5, 'value': 0.16932615163400927, 'traces': []}, {
            'i': 2,
            'j': 6,
            'value': 0,
            'traces': []
        }, {'i': 2, 'j': 7, 'value': 0.16932615163400927, 'traces': []}], [{
            'i': 3,
            'j': 0,
            'value': null,
            'traces': []
        }, {'i': 3, 'j': 1, 'value': null, 'traces': []}, {'i': 3, 'j': 2, 'value': 0, 'traces': []}, {
            'i': 3,
            'j': 3,
            'value': 0,
            'traces': []
        }, {'i': 3, 'j': 4, 'value': 0, 'traces': []}, {'i': 3, 'j': 5, 'value': 0, 'traces': []}, {
            'i': 3,
            'j': 6,
            'value': 0.29311348737245674,
            'traces': []
        }, {'i': 3, 'j': 7, 'value': 0, 'traces': []}], [{'i': 4, 'j': 0, 'value': null, 'traces': []}, {
            'i': 4,
            'j': 1,
            'value': null,
            'traces': []
        }, {'i': 4, 'j': 2, 'value': null, 'traces': []}, {'i': 4, 'j': 3, 'value': 0, 'traces': []}, {
            'i': 4,
            'j': 4,
            'value': 0,
            'traces': []
        }, {'i': 4, 'j': 5, 'value': 0, 'traces': []}, {'i': 4, 'j': 6, 'value': 0, 'traces': []}, {
            'i': 4,
            'j': 7,
            'value': 0,
            'traces': []
        }], [{'i': 5, 'j': 0, 'value': null, 'traces': []}, {'i': 5, 'j': 1, 'value': null, 'traces': []}, {
            'i': 5,
            'j': 2,
            'value': null,
            'traces': []
        }, {'i': 5, 'j': 3, 'value': null, 'traces': []}, {'i': 5, 'j': 4, 'value': 0, 'traces': []}, {
            'i': 5,
            'j': 5,
            'value': 0,
            'traces': []
        }, {'i': 5, 'j': 6, 'value': 0, 'traces': []}, {'i': 5, 'j': 7, 'value': 0, 'traces': []}], [{
            'i': 6,
            'j': 0,
            'value': null,
            'traces': []
        }, {'i': 6, 'j': 1, 'value': null, 'traces': []}, {'i': 6, 'j': 2, 'value': null, 'traces': []}, {
            'i': 6,
            'j': 3,
            'value': null,
            'traces': []
        }, {'i': 6, 'j': 4, 'value': null, 'traces': []}, {'i': 6, 'j': 5, 'value': 0, 'traces': []}, {
            'i': 6,
            'j': 6,
            'value': 0,
            'traces': []
        }, {'i': 6, 'j': 7, 'value': 0, 'traces': []}], [{'i': 7, 'j': 0, 'value': null, 'traces': []}, {
            'i': 7,
            'j': 1,
            'value': null,
            'traces': []
        }, {'i': 7, 'j': 2, 'value': null, 'traces': []}, {'i': 7, 'j': 3, 'value': null, 'traces': []}, {
            'i': 7,
            'j': 4,
            'value': null,
            'traces': []
        }, {'i': 7, 'j': 5, 'value': null, 'traces': []}, {'i': 7, 'j': 6, 'value': 0, 'traces': []}, {
            'i': 7,
            'j': 7,
            'value': 0,
            'traces': []
        }]];
        var sequence = "GGUCCAC";

        if(x > y) {

            d3.select("#second_svg").remove();
            dotplot(sequence=sequence, table=cells, pname="second",hover_reaction=hover_reaction_2,click_reaction=click_reaction_2);
        }
        else{
            d3.select("#second_svg").remove();
            d3.select("#tooltip_second").remove();

        }
    }

    function color_headers(x, y, pname){
        d3.select("#first").selectAll("rect").style("fill", "white");    // remove previous header shading, if any
        d3.select("#" + pname + "_border_" + x +"_0").style("fill", "lightcoral");
        d3.select("#" + pname + "_border_" + y +"_0").style("fill", "lightcoral");
    }

    function color_headers_subseq(x, y, pname){
        d3.select("#first").selectAll("rect").style("fill", "white");    // remove previous header shading, if any
        var count;
        var a;
        var b;
        if(x<y) {
            a = x;
            b = y;
        } else {
            a = y;
            b = x;
        }
        for(count=a;count<=b;count++){
            d3.select("#" + pname + "_border_" + count +"_0").style("fill", "lightcoral");
        }
    }

    function hover_reaction_1(x,y,z, pname){
        color_headers(x, y, pname);
    }

    function small_example(pname) {
        var cells = [[{'i': 0, 'j': 0, 'value': 0, 'traces': []}, {'i': 0, 'j': 1, 'value': 0, 'traces': []}, {
            'i': 0,
            'j': 2,
            'value': 0,
            'traces': []
        }, {'i': 0, 'j': 3, 'value': 0, 'traces': []}, {'i': 0, 'j': 4, 'value': 0, 'traces': []}, {
            'i': 0,
            'j': 5,
            'value': 0,
            'traces': []
        }, {'i': 0, 'j': 6, 'value': 0, 'traces': []}, {'i': 0, 'j': 7, 'value': 0, 'traces': []}], [{
            'i': 1,
            'j': 0,
            'value': 0,
            'traces': []
        }, {'i': 1, 'j': 1, 'value': 0, 'traces': []}, {'i': 1, 'j': 2, 'value': 0, 'traces': []}, {
            'i': 1,
            'j': 3,
            'value': 0.045538815895561774,
            'traces': []
        }, {'i': 1, 'j': 4, 'value': 0.045538815895561774, 'traces': []}, {
            'i': 1,
            'j': 5,
            'value': 0.16932615163400927,
            'traces': []
        }, {'i': 1, 'j': 6, 'value': 0, 'traces': []}, {
            'i': 1,
            'j': 7,
            'value': 0.41690082311090426,
            'traces': []
        }], [{'i': 2, 'j': 0, 'value': null, 'traces': []}, {'i': 2, 'j': 1, 'value': 0, 'traces': []}, {
            'i': 2,
            'j': 2,
            'value': 0,
            'traces': []
        }, {'i': 2, 'j': 3, 'value': 0, 'traces': []}, {
            'i': 2,
            'j': 4,
            'value': 0.2931134873724568,
            'traces': []
        }, {'i': 2, 'j': 5, 'value': 0.16932615163400927, 'traces': []}, {
            'i': 2,
            'j': 6,
            'value': 0,
            'traces': []
        }, {'i': 2, 'j': 7, 'value': 0.16932615163400927, 'traces': []}], [{
            'i': 3,
            'j': 0,
            'value': null,
            'traces': []
        }, {'i': 3, 'j': 1, 'value': null, 'traces': []}, {'i': 3, 'j': 2, 'value': 0, 'traces': []}, {
            'i': 3,
            'j': 3,
            'value': 0,
            'traces': []
        }, {'i': 3, 'j': 4, 'value': 0, 'traces': []}, {'i': 3, 'j': 5, 'value': 0, 'traces': []}, {
            'i': 3,
            'j': 6,
            'value': 0.29311348737245674,
            'traces': []
        }, {'i': 3, 'j': 7, 'value': 0, 'traces': []}], [{'i': 4, 'j': 0, 'value': null, 'traces': []}, {
            'i': 4,
            'j': 1,
            'value': null,
            'traces': []
        }, {'i': 4, 'j': 2, 'value': null, 'traces': []}, {'i': 4, 'j': 3, 'value': 0, 'traces': []}, {
            'i': 4,
            'j': 4,
            'value': 0,
            'traces': []
        }, {'i': 4, 'j': 5, 'value': 0, 'traces': []}, {'i': 4, 'j': 6, 'value': 0, 'traces': []}, {
            'i': 4,
            'j': 7,
            'value': 0,
            'traces': []
        }], [{'i': 5, 'j': 0, 'value': null, 'traces': []}, {'i': 5, 'j': 1, 'value': null, 'traces': []}, {
            'i': 5,
            'j': 2,
            'value': null,
            'traces': []
        }, {'i': 5, 'j': 3, 'value': null, 'traces': []}, {'i': 5, 'j': 4, 'value': 0, 'traces': []}, {
            'i': 5,
            'j': 5,
            'value': 0,
            'traces': []
        }, {'i': 5, 'j': 6, 'value': 0, 'traces': []}, {'i': 5, 'j': 7, 'value': 0, 'traces': []}], [{
            'i': 6,
            'j': 0,
            'value': null,
            'traces': []
        }, {'i': 6, 'j': 1, 'value': null, 'traces': []}, {'i': 6, 'j': 2, 'value': null, 'traces': []}, {
            'i': 6,
            'j': 3,
            'value': null,
            'traces': []
        }, {'i': 6, 'j': 4, 'value': null, 'traces': []}, {'i': 6, 'j': 5, 'value': 0, 'traces': []}, {
            'i': 6,
            'j': 6,
            'value': 0,
            'traces': []
        }, {'i': 6, 'j': 7, 'value': 0, 'traces': []}], [{'i': 7, 'j': 0, 'value': null, 'traces': []}, {
            'i': 7,
            'j': 1,
            'value': null,
            'traces': []
        }, {'i': 7, 'j': 2, 'value': null, 'traces': []}, {'i': 7, 'j': 3, 'value': null, 'traces': []}, {
            'i': 7,
            'j': 4,
            'value': null,
            'traces': []
        }, {'i': 7, 'j': 5, 'value': null, 'traces': []}, {'i': 7, 'j': 6, 'value': 0, 'traces': []}, {
            'i': 7,
            'j': 7,
            'value': 0,
            'traces': []
        }]];
        var sequence = "GGUCCAC";

        dotplot(sequence, cells, pname, hover_reaction_1, click_reaction_1);

    }


</script>

<div id="first" style="width:550px;height:420px">
    <script>small_example("first");</script>
</div>
<p> </p>
<div id="second" style="width:550px;height:420px">

</div>
</body></html>